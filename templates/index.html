<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
    integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
    integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />

  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <title>BimaXpress </title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="{% static '/plugins/fontawesome-free/css/all.min.css' %}" />
  <!-- Ionicons -->
  <link rel="stylesheet" href="{% static 'https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css' %}" />
  <!-- Tempusdominus Bootstrap 4 -->
  <link rel="stylesheet"
    href="{% static '/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css' %}" />
  <!-- iCheck -->
  <link rel="stylesheet" href="{% static '/plugins/icheck-bootstrap/icheck-bootstrap.min.css' %}" />
  <!-- JQVMap -->
  <link rel="stylesheet" href="{% static '/plugins/jqvmap/jqvmap.min.css' %}" />
  <!-- Theme style -->
  <link rel="stylesheet" href="{% static '/dist/css/pageAccordian.css' %}" />
  <link rel="stylesheet" href="{% static '/dist/css/adminlte.min.css' %}" />
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />

  <!-- overlayScrollbars -->
  <link rel="stylesheet" href="{% static '/plugins/overlayScrollbars/css/OverlayScrollbars.min.css' %}" />
  <!-- Daterange picker -->
  <link rel="stylesheet" href="{% static '/plugins/daterangepicker/daterangepicker.css' %}" />
  <!-- summernote -->
  <link rel="stylesheet" href="{% static '/plugins/summernote/summernote-bs4.min.css' %}" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
  <style>
    body {
      text-transform: capitalize;
      background-color: white !important;
      background: white !important;
      font-family: 'Poppins', sans-serif !important;
    }

    .cardBottom:hover {
      box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
    }

    .homeBottomCards {
      display: flex;
      flex-wrap: wrap;
    }

    .homeMiddleLineForListAndGrid {
      display: flex;
      height: 40px;
      width: 100%;
      background-color: #564aff;
      border-radius: 8px;
      margin-top: 20px;
    }

    .cardTop {
      padding-top: 10px;
      width: 8em;
      height: 8em;
      margin-top: 10px;
      text-align: center;
      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
      transition: 0.3s;
      border-radius: 10px;
      margin: 10px;
      cursor: pointer;
      font-family: 'Poppins', sans-serif !important;
    }

    .cardTop:hover {
      box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
    }

    .homeUpperCards {
      padding-top: 20px;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-evenly;
      justify-content: center;
    }

    .dropdown {
      position: relative;
      display: inline-block;
    }

    .dropdown-content {
      display: none;
      position: absolute;
      background-color: #f9f9f9;
      min-width: 160px;
      box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
      padding: 12px 16px;
      z-index: 1;
    }

    .dropdown:hover .dropdown-content {
      display: block;
    }

    .overflowText {
      width: 100%;
      text-align: center;
      white-space: nowrap;
      overflow: hidden !important;
      text-overflow: ellipsis;
    }
  </style>

  <script>
    var firebaseConfig = {
      apiKey: "AIzaSyDlZMu8lypZDEhRpMVKlD3JcTuvItFaG2A",
      authDomain: "bimaxpress-cashless.firebaseapp.com",
      projectId: "bimaxpress-cashless",
      storageBucket: "bimaxpress-cashless.appspot.com",
      messagingSenderId: "577257002368",
      appId: "1:577257002368:web:489252768c47b398465d65",
      measurementId: "G-Y8B68GW5YX"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
  </script>

  <style>
    .border-md {
      border-width: 2px;
    }

    .btn-facebook {
      background: #405d9d;
      border: none;
    }

    .btn-facebook:hover,
    .btn-facebook:focus {
      background: #314879;
    }

    .btn-twitter {
      background: #42aeec;
      border: none;
    }

    .btn-twitter:hover,
    .btn-twitter:focus {
      background: #1799e4;
    }

    body {
      min-height: 100vh;
    }

    .form-control:not(select) {
      padding: 1.5rem 0.5rem;
    }

    select.form-control {
      height: 52px;
      padding-left: 0.5rem;
    }

    .form-control::placeholder {
      color: #ccc;
      font-weight: bold;
      font-size: 0.9rem;
    }

    .form-control:focus {
      box-shadow: none;
    }

    .cardBottom {
      width: 16em;
      max-width: 17.6em;
      min-height: 20em;
      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
      transition: 0.3s;
      border-radius: 20px;
      margin: 10px;
      border: 3px solid #d7d4ff;
      flex: 1;
      cursor: pointer;
    }

    .cardBottom:hover {
      box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
    }

    .homeBottomCards {
      display: flex;
      flex-wrap: wrap;
    }

    .homeMiddleLineForListAndGrid {
      display: flex;
      height: 40px;
      width: 100%;
      background-color: rgb(167, 47, 67);
      ;
      border-radius: 8px;
      margin-top: 20px;
    }

    .cardTopNum {
      font-size: 2.2em;
    }

    .cardTopTex {
      font-size: 0.8em;
    }
  </style>
</head>

<body class="hold-transition sidebar-mini layout-fixed">
  <div class="wrapper">
    <!-- Preloader -->
    <div class="preloader flex-column justify-content-center align-items-center">
      <img class="animation__shake" src="../static/dist/img/SmallLogo.jpeg" alt="bima" height="60"
        width="60" />
    </div>

    <!-- Navbar -->
    <nav class="main-header navbar navbar-expand navbar-white navbar-light">
      <!-- Left navbar links -->
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
        </li>
        <li class="nav-item ml-2 mr-2 d-none d-sm-inline-block">
          <img src="../static/img/Imgs/Asset 1.svg" height="40em" alt="" srcset="">
        </li>

      </ul>

      <!-- Right navbar links -->

      <ul class="navbar-nav ml-auto">
        <div class="dropdown">
          <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            {{role}}
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
           
            <a class="dropdown-item" href="#">{{hospital_email}}</a>
            <a class="dropdown-item" > 

              <form action="/logout" method="POST">
                {% csrf_token %}
                <i class="ni ni-single-02 text-red"></i>
                <span class="nav-link-text"><input class="ml-3" style="border: none; background: transparent" type="submit"
                    value="Logout" /></span>
              </form>

            </a>
          </div>
        </div>
      </ul>
   
    </nav>
    <!-- /.navbar -->

    <!-- Main Sidebar Container -->
    <aside class="main-sidebar sidebar-dark-primary elevation-4"
      style="margin-top: 5em; max-height: 80%; background-color: #f4f6f9; color: black; border-top-right-radius: 20px;border-bottom-right-radius: 20px;">
      <!-- Brand Logo -->

      <!-- Sidebar -->
      <div class="sidebar">
        <!-- Sidebar Menu -->
        <nav class="mt-2">
          <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="true">
            <!-- Add icons to the links using the .nav-icon class
                 with font-awesome or any other icon font library -->
            <li class="nav-item menu-open" style="margin-left: -50px !important;">
              <ul class="nav nav-treeview">
                <li class="nav-item">
                  <a href="/mainpage" class="nav-link active" style="background-color: rgb(255, 166, 0);">
                    <i class="fas fa-home"></i>
                    <p>Home</p>
                  </a>
                </li>

                <li class="nav-item">
                  <a href="bunny" class="nav-link active">
                    <i class="fas fa-envelope"></i>
                    <p>Email</p>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="/newcase" class="nav-link active">

                    <i style="color:black;" class="fas fa-plus"></i>
                    <p>New Case</p>

                  </a>
                </li>
                {% if role == 'admin' %}
                <li class="nav-item">
                  <a href="/plandetails" class="nav-link active">
                    <i class="fas fa-clipboard-check"></i>
                    <p>Plan Details</p>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="/hospital" class="nav-link active">
                    <i class="fas fa-hospital-alt"></i>
                    <p>Hospital</p>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="/analist" class="nav-link active">
                    <i class="fas fa-user-circle"></i>
                    <p>Analyst</p>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="/doctor" class="nav-link active">
                    <i class="fas fa-user-nurse"></i>
                    <p>Doctor</p>
                  </a>
                </li>

                <li class="nav-item">
                  <a href="/empanelledCompanies" class="nav-link active">
                    <i class="fas fa-calendar-check"></i>
                    <p>Empanelled Companies</p>
                  </a>
                </li>
                {% endif %}

              </ul>
            </li>
          </ul>
        </nav>
        <!-- /.sidebar-menu -->
      </div>
      <!-- /.sidebar -->
    </aside>


    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper"
      style="padding-left: 5em !important; padding-right: 5em !important; background-color: white !important;">

      <!-- /.content-header -->



      <div class="row">
        {% for sta in list_status %}
        <div class="homeUpperCards" id="homeUpperCards" style="justify-content: center;">

          <div class="cardTop rgb(167, 47, 67)">

            <a href="/listData/{{sta}}">
              {% if sta == 'draft' %}
              <span style="color: rgb(167, 47, 67);" class="cardTopNum"><b> {{users}} {{draft}}</b></span> <br>
              <span style="color: rgb(167, 47, 67);" class="cardTopTex">{{sta}}</span>
              {% endif %}
            </a>
            <a href="/listData/{{sta}}">
              {% if sta == 'Unprocessed' %}
              <span style="color: skyblue;" class="cardTopNum"><b> {{users}} {{values.Unprocessed}} </b></span><br>
              <span style="color: skyblue;" class="cardTopTex">{{sta}}</span>
              {% endif %}
            </a>
            <a href="/listData/{{sta}}">
              {% if sta == 'Approved' %}
              <span style="color: lightgreen; " class="cardTopNum"><b> {{users}} {{values.Approved}} </b></span> <br>
              <span style="color: lightgreen; " class="cardTopTex">{{sta}}</span>
              {% endif %}
            </a>
            <a href="/listData/{{sta}}">
              {% if sta == 'query' %}
              <span style="color: darkblue;" class="cardTopNum"><b> {{users}} {{values.query}} </b></span> <br>
              <span style="color: darkblue;" class="cardTopTex">{{sta}}</span>
              {% endif %}
            </a>
            <a href="/listData/{{sta}}">
              {% if sta == 'Reject' %}
              <span style="color: red;" class="cardTopNum"><b> {{users}} {{values.Reject}} </b></span> <br>
              <span style="color: red;" class="cardTopTex">{{sta}}</span>
              {% endif %}
            </a>
            <a href="/listData/{{sta}}">
              {% if sta == 'Enhance' %}
              <span style="color: orange;" class="cardTopNum"><b> {{users}} {{values.Enhance}} </b></span>
              <br>
              <span style="color: orange;" class="cardTopTex">{{sta}}</span>
              {% endif %}
            </a>
            <a href="/listData/{{sta}}">
              {% if sta == 'Discharge_Approved' %}
              <span style="color: rgb(9, 163, 9);" class="cardTopNum"><b> {{users}} {{values.Discharge_Approved}} </b>
              </span> <br>
              <span style="color: rgb(9, 163, 9);" class="cardTopTex">Discharge Approved</span>
              {% endif %}
            </a>
            <a href="/listData/{{sta}}">
              {% if sta == 'Settled' %}
              <span style="color: black;" class="cardTopNum"><b> {{users}} {{values.Settled}} </b></span> <br>
              <span style="color: black;" class="cardTopTex">{{sta}}</span>
              {% endif %}

            </a>
          </div>
        </div>

        {% endfor %}
        <div class="mt-5">



          </form>
        </div>
      </div>

      <div class="homeMiddleLineForListAndGrid" id="homeMiddleLineForListAndGrid">
        <i class="glyphicon glyphicon-th-large text-white GridLIst" style="cursor: pointer;" id="grid"
          onclick="Grid()"></i>
        <i class="glyphicon glyphicon-th-list text-white GridLIst" style="cursor: pointer;" id="list"
          onclick="List()"></i>
        <span style="color: white; margin-top: 10px;"><b>&nbsp;Draft</b></span>
        <i class="glyphicon glyphicon-user text-white floatRight"></i>
        <!-- <span style="color: white; margin-top: 10px;" class="floatRight"><b>&nbsp;05</b></span> -->
      </div>
      <!-- Modal -->


      <div style="display: flex; justify-content: center; align-items: center; flex-wrap: wrap;" id="gridCards">

                    {% for i,j in cases_data.items %} 
                      <button type="submit" class="text-left" name="system" value="{{hospital_email}}+{{i}}"
                              form="systemform" style="background: transparent; border: none;">
                            <form action="/claimpage1" method="get" id="systemform">
                               {% csrf_token %}
                                <div class="cardBottom" id="cardBottom" name="cardBottom" style="padding: 1em;">
                                  <p style="font-size: 1.5em; margin-top: 0.5em; text-align: center;"><b>{{j.patient_details.Name}}</b></p>
                                  <p style="margin-top: -20px; text-align: center;" class="overflowText">{{j.patient_details.Phone}}</p>
                                  <hr style="border:  2px solid rgb(167, 47, 67); background-color: rgb(167, 47, 67);">
                                  <p ><b>Form Status -</b>{{j.formstatus}}</p>
                                  <p style="margin-top: -18px;"><b>Admission Date -</b>{{j.hospital_details.Date_of_Admission}}</p>
                                  <p style="margin-top: -18px;"><b>Claim Amount -</b>{{j.hospital_details.total}}</p>
                                  <p style="margin-top: -18px;" class="overflowText"><b>Insurance TPA -</b>{{j.patient_details.Insurance_Company}}</p>

                                </div>
                            </form>
                      </button>
                    {% endfor %}  

      </div>

    </div>

    <!-- /.content-wrapper -->

    <!-- Control Sidebar -->
    <aside class="control-sidebar control-sidebar-dark">
      <!-- Control sidebar content goes here -->
    </aside>
    <!-- /.control-sidebar -->
  </div>
  <!-- ./wrapper -->
  <script>
    // For Demo Purpose [Changing input group text on focus]
    $(function () {
      $("input, select").on("focus", function () {
        $(this)
          .parent()
          .find(".input-group-text")
          .css("border-color", "#80bdff");
      });
      $("input, select").on("blur", function () {
        $(this)
          .parent()
          .find(".input-group-text")
          .css("border-color", "#ced4da");
      });
    });
  </script>
  <!-- jQuery -->
  <script>
    // TODO: Replace the following with your app's Firebase project configuration
    // For Firebase JavaScript SDK v7.20.0 and later, `measurementId` is an optional field

    var firebaseConfig = {
      apiKey: "AIzaSyDlZMu8lypZDEhRpMVKlD3JcTuvItFaG2A",
      authDomain: "bimaxpress-cashless.firebaseapp.com",
      projectId: "bimaxpress-cashless",
      storageBucket: "bimaxpress-cashless.appspot.com",
      messagingSenderId: "577257002368",
      appId: "1:577257002368:web:489252768c47b398465d65",
      measurementId: "G-Y8B68GW5YX"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    var db = firebase.firestore();
    function createcase(a, b) {
      alert("Harsh");

    }
    function call_function(x, y) {

      console.log(x);
      console.log(y);

      console.log("bjuuny");
      var newstatus = document.getElementById("analystList").value;
      console.log(newstatus);

      db.collection("hospitals").doc(x).collection("cases").doc(y).update({
        formstatus: newstatus,
      })
        .then(() => {
          console.log("Document successfully written!");
        })
        .catch((error) => {
          console.error("Error writing document: ", error);
        });

    }

    function List() {
      document.getElementById('gridCards').innerHTML = `
      <div class="container-fluid" style="height: 400px; overflow-y: auto;">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col">Patient Name</th>
                                    <th scope="col">Form Status</th>
                                    <th scope="col">Admission Date</th>
                                    <th scope="col">Claim Amount</th>
                                    <th scope="col">Insurance TPA</th>

                                </tr>
                            </thead>
                            <tbody>
     
                                  {% for i,j in cases_data.items %} 
                                  <tr>
                                    <td>{{j.patient_details.Name}}</td>
                                     <td>{{j.formstatus}}</td>
                                     <td>{{j.date}}</td>
                                     <td>{{j.hospital_details.total}}</td>
                                     <td>{{j.patient_details.Insurance_Company}}</td>
                                  </tr>
                                  {% endfor %} 

                            </tbody>
                        </table>
                    </div>
      `;
    }
    function Grid() {
      document.getElementById('gridCards').innerHTML = `
             {% for i,j in cases_data.items %} 
                      <button type="submit" class="text-left" name="system" value="{{hospital_email}}+{{i}}"
                              form="systemform" style="background: transparent; border: none;">
                            <form action="/claimpage1" method="get" id="systemform">
                               {% csrf_token %}
                                <div class="cardBottom" id="cardBottom" name="cardBottom" style="padding: 1em;">
                                  <p style="font-size: 1.5em; margin-top: 0.5em; text-align: center;"><b>{{j.patient_details.Name}}</b></p>
                                  <p style="margin-top: -20px; text-align: center;" class="overflowText">{{j.patient_details.Phone}}</p>
                                  <hr style="border:  2px solid rgb(167, 47, 67); background-color: rgb(167, 47, 67);">
                                  <p ><b>Form Status -</b>{{j.formstatus}}</p>
                                  <p style="margin-top: -18px;"><b>Admission Date -</b>{{j.date}}</p>
                                  <p style="margin-top: -18px;"><b>Claim Amount -</b>{{j.hospital_details.total}}</p>
                                  <p style="margin-top: -18px;" class="overflowText"><b>Insurance TPA -</b>{{j.patient_details.Insurance_Company}}</p>

                                </div>
                            </form>
                      </button>
                    {% endfor %}
      `;
    }
  </script>





  <script src="{% static '/plugins/jquery/jquery.min.js' %}"></script>
  <!-- jQuery UI 1.11.4 -->
  <script src="{% static '/plugins/jquery-ui/jquery-ui.min.js' %}"></script>
  <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
  <script>
    $.widget.bridge("uibutton", $.ui.button);
  </script>
  <!-- Bootstrap 4 -->
  <script src="{% static '/plugins/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <!-- ChartJS -->
  <script src="{% static '/plugins/chart.js/Chart.min.js' %}"></script>
  <!-- Sparkline -->
  <script src="{% static '/plugins/sparklines/sparkline.js' %}"></script>
  <!-- JQVMap -->
  <script src="{% static '/plugins/jqvmap/jquery.vmap.min.js' %}"></script>
  <script src="{% static '/plugins/jqvmap/maps/jquery.vmap.usa.js' %}"></script>
  <!-- jQuery Knob Chart -->
  <script src="{% static '/plugins/jquery-knob/jquery.knob.min.js' %}"></script>
  <!-- daterangepicker -->
  <script src="{% static '/plugins/moment/moment.min.js' %}"></script>
  <script src="{% static '/plugins/daterangepicker/daterangepicker.js' %}"></script>
  <!-- Tempusdominus Bootstrap 4 -->
  <script src="{% static '/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js' %}"></script>
  <!-- Summernote -->
  <script src="{% static '/plugins/summernote/summernote-bs4.min.js' %}"></script>
  <!-- overlayScrollbars -->
  <script src="{% static '/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js' %}"></script>
  <!-- AdminLTE App -->
  <script src="{% static '/dist/js/adminlte.js' %}"></script>
  <!-- AdminLTE for demo purposes -->
  <script src="{% static '/dist/js/demo.js' %}"></script>
  <!-- AdminLTE dashboard demo (This is only for demo purposes) -->
  <script src="{% static '/dist/js/pages/dashboard.js' %}"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
    crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
    crossorigin="anonymous"></script>
</body>
</html>